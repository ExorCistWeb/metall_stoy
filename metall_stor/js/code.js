var _tmr=_tmr||[];!function(){function e(e){var t=typeof e;return!("number"===t||"boolean"===t||"string"===t||e.nodeType||e===e.window)}function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function r(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function o(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function i(n,r,o){if(!n)return o&&null===n?"null":"";if(!e(n))return"";var i=[];if(t(n)){for(var l=0,c=n.length;l<c;l++)a(i,null,n[l],r,o);n="[",r="]"}else{for(l in n)n.hasOwnProperty(l)&&a(i,l,n[l],r,o);n="{",r="}"}return i.length?n+i.join(",")+r:o?n+r:""}function a(e,t,n,r,o){var a=typeof n;if("string"===a)n='"'+n.replace(/[\"\']/g,"\\$&")+'"';else if("number"!==a&&"boolean"!==a&&!(n=r?"":i(n,!1,o)).length)return;e.push((null===t?"":'"'+t+'":')+n)}function l(){var n,r,o,i,a,c=arguments,s=c[0]||{},u=!1,p=1,d=c.length;for("boolean"==typeof s&&(u=s,s=c[p++]||{}),e(s)||(s={});p<d;p++)if(null!=(n=c[p]))for(r in n)o=s[r],s!==(i=n[r])&&(u&&i&&(e(i)||(a=t(i)))?(a?(a=!1,o=o&&t(o)?o:[]):o=o&&e(o)?o:{},s[r]=l(u,o,i)):void 0!==i&&(s[r]=i));return s}function c(e){var t="";try{var n=new Uint8Array(e);H.crypto.getRandomValues(n);for(var r=0;r<e;r++)t+=(n[r]%16).toString(16)}catch(o){for(t="",r=0;r<e;r++)t+=(n=Math.floor(16*Math.random())).toString(16)}return t}function s(){return(new Date).getTime()}function u(e,t){var o,i={data:t,raw:e,url:"https://top-fwz1.mail.ru"+e};"function"!=typeof $.sendBeacon?o=!1:(i.dataSplitter=";",o=_(i.data,i.dataSplitter),o=!0===$.sendBeacon(i.url,o)),o||(void 0===t?(i.dataSplitter=";",i.open=v,i.connect=m,i.startListen=g,i.stopListen=y,i.open(i),i.connect(i)):("function"==typeof H.XMLHttpRequest?(i.dataSplitter=";",i.open=p,i.connect=d,i.startListen=f,i.stopListen=h,i.open(i),i.connect(i),o=!0):o=!1,o||function(e){var t=q.createElement("iframe"),o=q.createElement("div");o.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),o.appendChild(t),q.body.appendChild(o);try{var i,a=t.contentWindow.document,l=a.createElement("div");for(i in e.data)if(e.data.hasOwnProperty(i)){var c=e.data[i],s=typeof c;if("string"===s||"number"===s){var u=a.createElement("input");u.setAttribute("type","hidden"),u.setAttribute("name",i),u.value=c,l.appendChild(u)}}var p=a.createElement("form");p.setAttribute("action",e.url),p.setAttribute("method",ne),p.setAttribute("enctype",re),p.appendChild(l);var d=a.createElement("div");d.appendChild(p),a.body.appendChild(d);var f=function(){try{r(t,"load",f),q.body.removeChild(o)}catch(e){K&&console.warn("[TopMailRu] Error#1.2",e)}};n(t,"load",f),p.submit()}catch(e){K&&console.warn("[TopMailRu] Error#1.3",e)}}(i)))}function p(e){e._connection=new H.XMLHttpRequest}function d(e){e._connection.open(ne,e.url),e._connection.setRequestHeader("Content-Type",re),e._connection.send(_(e.data,e.dataSplitter))}function f(e){n(e._connection,"load",e._onload),n(e._connection,"error",e._onerror)}function h(e){r(e._connection,"load",e._onload),r(e._connection,"error",e._onerror)}function v(e){e._connection=new Image}function m(e){e._connection.src=e.url+_(e.data,e.dataSplitter)}function g(e){e._connection.onload=e._onload,e._connection.onerror=e._onerror}function y(e){e._connection.onload=null,e._connection.onerror=null}function _(e,t){var n,r=t||";",o="";for(n in e)if(e.hasOwnProperty(n)){var i=e[n],a=typeof i;"string"!==a&&"number"!==a||(o+=r+escape(n)+"="+escape(i))}return o}function b(e){return(e=q.cookie.match(RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(e[1]):null}function w(e,t,n){var r=(n=n||{}).expires;for(var o in"number"==typeof n.expires&&(r=new Date).setTime(r.getTime()+n.expires),r&&r.toUTCString&&(r=r.toUTCString()),n.expires=r,e=e+"="+encodeURIComponent(t),n)((t=n[o])||0===t)&&(e+="; "+o,!0!==t&&(e+="="+t));q.cookie=e}function E(e,t){if(oe&&w(e,t,le),ae)try{ie.setItem(e,t)}catch(e){K&&console.warn("[TopMailRu] Error#1.6",e)}}function k(e){var t;if(!(t=oe?b(e):null)){var n;if(ae)e:{try{n=ie.getItem(e);break e}catch(e){K&&console.warn("[TopMailRu] Error#1.5",e)}n=null}else n=null;t=n}return t}function T(e){var t=";e="+escape("detect");u(P(e,"/tracker",!1,!1)+t)}function R(e,t){if(e.length&&null!==t.ecom_data&&!(4096<(n=(n=i(t.ecom_data,!1,!0))?(""+n).substring(1,n.length-1):"").length||-1===n.search(/\S/))){var n="{"+n+S("_m",t.ecom_method)+S("_t",t.ecom_type)+S("_jst",be())+"}";u(P({id:e[0]},"/datalayer",!1,!1)+";ids="+escape(e.join())+";e="+escape(n))}}function S(e,t){var n=',"'+e+'":';if(!t||!t.length)return n+"[]";try{return n+'["'+t.join('","')+'"]'}catch(e){}return n+"false"}function M(){}function C(e){e&&"object"==typeof e&&!He&&"id"in e&&(He=e.id)}function I(e){return(e=Ke?Ke[e]:void 0)&&Je?e-Je:void 0}function j(){if(Ke){for(var e=0,t="domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),n=0;n<t.length;n++){var r=Ke?Ke[t[n]]:void 0;0<r&&(r<e||0==e)&&(e=r)}return e||void 0}}function x(e){return e&&"object"==typeof e&&("id"in e&&e.id||He)}function P(e,t,n,r){E(Ue,++Le);var o,a="id"in e?e.id:He,l="url"in e?e.url:G.href,c="referrer"in e?e.referrer:q.referrer,u="title"in e?e.title:q.title;null===(o=ue)&&(o=function(){var e=b(de);if(null===e)return null;if(2!==(e=e.split("|")).length)return null;var t=e[1];return 0>(t=s()-t)||t>pe?null:(e=parseInt(e[0],10),isNaN(e)?null:e)}()),o=null!==o?o?1:0:null;var p,d="userid"in e?e.userid:je||0===je?je:void 0,f=xe||void 0;p=[],He&&a!==He&&p.push("sec"),"dataLayer"in H&&p.push("dl"),he&&p.push(["ecom"].concat(he).join("-")),we&&we.length&&p.push(["jst"].concat(we).join("-")),p=p.join(",");var h,v=H.screen,m=(new Date).getTimezoneOffset();if(h="",H.Intl)try{h=H.Intl.DateTimeFormat().resolvedOptions().timeZone||""}catch(e){K&&console.warn("[TopMailRu] Error#1.1",e)}if(h=m+"/"+h,m=null!==(m=Te)?m:function(){var e=b(ke);if(null===e)return null;if(3!==(e=e.split("|")).length)return null;var t=e[2];return 0>(t=s()-t)||t>Ee?null:{id:e[0],version:e[1]}}(),e.start=j(),t=t+"?js=13"+(a?";id="+escape(a):"")+(l?";u="+escape(l):"")+(c?";r="+escape(c):"")+(e.start?";st="+escape(e.start):"")+("gender"in e?";gender="+escape(e.gender):"")+("age"in e?";age="+escape(e.age):"")+("pid"in e?";pid="+escape(e.pid):"")+(void 0!==d?";userid="+escape(d):"")+(void 0!==f?";uparams="+escape(i(f,!1,!1)):"")+(r&&u?";title="+encodeURIComponent(u):"")+(v?";s="+v.width+"*"+v.height:"")+";vp=",a=r=0,q.documentElement&&(q.documentElement.clientWidth||q.documentElement.clientHeight)?(r=q.documentElement.clientWidth,a=q.documentElement.clientHeight):"number"==typeof H.innerWidth&&(r=H.innerWidth,a=H.innerHeight),t=t+(r+"*")+a+";touch="+We+";hds="+ze+";frame="+Fe+";flash=",null===Be)if(Be="",$.plugins&&$.plugins["Shockwave Flash"])Be=$.plugins["Shockwave Flash"].description.split(" ")[2];else if(H.ActiveXObject)try{var g=(g=(g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")).split(" ")[1].split(",");Be=g[0]+"."+g[1]}catch(e){K&&console.warn("[TopMailRu] Error#1.12",e)}if(g=t+Be+";sid="+Ie+";ver="+Se+";tz="+encodeURIComponent(h),n){if(Ke&&Ye){for((n=[]).push(Ye.type),n.push(Ye.redirectCount),n.push(Je),t=0;t<Ze.length;t++)n.push(I(Ze[t]));n=n.join("/")}else n="";n=";nt="+n}else n="";if(n=g+n+("device"in e?";device="+escape(e.device):"")+";ni=",$&&$.connection){for(g=$.connection,t=[],a=0;a<Qe.length;a++){if(void 0!==(r=g[Qe[a]]))switch(r){case!0:r=1;break;case!1:r=0;break;default:r=(""+r).replace(/\//g,"_")}t.push(r)}g=t.join("/")}else g="";return n+g+("params"in e?";params="+escape(i(e.params,!1,!1)):"")+(null!==o?";detect="+o:"")+(oe||ae?";lvid="+escape([Ve,s(),Le,Oe].join(":")):"")+(p?";opts="+escape(p):"")+(m?";flocid="+escape(m.id)+";flocv="+escape(m.version):"")+("version"in e?";appver="+escape(e.version):"")+(Re.support?";visible="+Re.getValue():"")+";_="+Math.random()}function U(e){e=";e="+escape("PVT/"+e);for(var t=0;t<$e.length;t++)u(P($e[t],"/tracker",!1,!0)+e)}function L(){if(ue=!0,V(1),!te&&!se){se=!0;for(var e=0;e<$e.length;e++)T($e[e])}}function O(){V(0),ue=!1}function V(e){e=[e,s()].join("|"),w(de,e,{path:"/",expires:pe})}function A(){q.addEventListener?(r(q,"DOMContentLoaded",A),_tmr.onready()):q.attachEvent&&"complete"===q.readyState&&(r(q,"readystatechange",A),_tmr.onready())}function D(){r(H,"unload",D),r(H,"beforeunload",D),_tmr.unload()}if("[object Array]"===Object.prototype.toString.call(_tmr)){var H=window,$=navigator,q=document,G=location,N="string"==typeof G.hostname?G.hostname:"",W=-1!=N.search(/(^|\.)odnoklassniki\.ru$/)||-1!=N.search(/(^|\.)ok\.ru$/),z=-1!=N.search(/(^|\.)vk\.com$/),F=-1!=N.search(/(^|\.)lamoda\.ru$/),B=-1!=N.search(/(^|\.)kommersant\.ru$/),X="string"==typeof G.search&&-1!=G.search.search(/[?&]rb_clickid=/),K="string"==typeof G.search&&-1!=G.search.search(/[?&]tmr_debug=1(?:&|$)/),Y=W||z||F||B,Z=!X,J=W||z,Q=W||z,ee=W||z,te=!1,ne="POST",re="application/x-www-form-urlencoded",oe=!(0===G.hostname.search(/^(\d+.)+\d+$/g)||-1!==G.hostname.search(/:/g)),ie=null,ae=function(){var e="tmr"+(""+Math.random()).slice(2);try{return(ie=H.localStorage||null).setItem(e,e),ie.removeItem(e),!0}catch(e){return ie=null,K&&console.warn("[TopMailRu] Error#1.4",e),!1}}(),le={domain:function(){if(!oe)return null;for(var e,t=G.hostname.split(".").reverse(),n=1,r=t.length;n<r;n++){e=t[0];for(var o=1;o<=n;o++)e=t[o]+"."+e;o=""+s();var i={domain:e,path:"/",expires:3e5};try{w("tmr_tcdhn",o,i);var a=b("tmr_tcdhn");if((i=i||{}).expires=-1,w("tmr_tcdhn","",i),a===o)return e}catch(e){K&&console.warn("[TopMailRu] Error#1.8",e)}}return null}(),path:"/",expires:287712e5};!function(){var e;if(e=q.cookie.match(RegExp("(?:^|; )(tmr_tcdhn\\d+)=([^;]*)","g"))){for(var t,n=[],r=0,o=e.length;r<o;r++)(t=(t=e[r]).match(/(?:^|; )(tmr_tcdhn\d+)=([^;]*)/))&&n.push(t.slice(1));e=n}else e=null;if(e)for(n=0,r=e.length;n<r;n++)o=e[n][0],(t=le||{}).expires=-1,w(o,"",t)}();var ce,se=!1,ue=null,pe=864e5,de="tmr_detect",fe=function(){function e(e,t){var n=q.createElement("div");n.setAttribute("class",String.fromCharCode(97,100,118,98,108,111,99,107,32,97,100,118,101,114,116,98,108,111,99,107,32,97,109,109,98,108,111,99,107,32,98,45,98,97,110,110,101,114,32,98,45,109,101,100,105,97,45,98,97,110,110,101,114,32,112,117,98,95,51,48,48,120,50,53,48,32,112,117,98,95,51,48,48,120,50,53,48,109,32,109,101,100,105,117,109,95,114,101,99,116,97,110,103,108,101,95,51,48,48,95,50,53,48,32,112,117,98,95,55,50,56,120,57,48,32,108,101,97,100,101,114,98,111,97,114,100,95,55,50,56,95,57,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,95,54,48,48,32,119,105,100,101,95,115,107,121,115,99,114,97,112,101,114,95,49,54,48,120,54,48,48,32,116,101,120,116,45,97,100,32,116,101,120,116,65,100,32,116,101,120,116,95,97,100,32,116,101,120,116,95,97,100,115,32,116,101,120,116,45,97,100,115,32,116,101,120,116,45,97,100,45,108,105,110,107,115,32,97,100,95,116,101,120,116,32,97,100,95,116,101,120,116,32,98,97,110,110,101,114,95,116,101,120,116,32,116,101,120,116,45,98,97,110,110,101,114,32,98,45,114,98,32,114,98,45,115,108,111,116,32,98,45,112,114,111,109,111,45,97,100,32,105,45,98,114,97,110,100,105,110,103,32,98,114,97,110,100,105,110,103,45,112,32,114,98,45,118,105,100,101,111,45,119,105,100,103,101,116,32,98,45,109,105,109,105,99,45,97,100,118,32,112,109,45,116,111,111,108,98,97,114,95,95,98,97,110,110,101,114,32,114,98,95,98,111,100,121,32,115,116,105,99,107,121,45,115,112,114,105,110,103,115,32,97,100,118,95,115,108,111,116,95,49,32,98,97,110,110,101,114,95,50,52,48,32,98,108,111,99,107,95,115,104,97,114,101,32,97,99,116,105,111,110,45,45,115,104,97,114,101,32,115,104,97,114,101,108,105,115,116,32,106,115,45,98,97,110,110,101,114,32,100,105,114,101,99,116,32,112,99,45,109,105,109,105,99,32,116,103,98,45,98,97,110,110,101,114,32,121,97,100,105,114,101,99,116,32,106,115,45,112,114,111,109,111,45,112,111,112,117,112,32,109,45,115,117,98,115,99,114,105,112,116,105,111,110,32,112,45,116,97,114,103,101,116,32,112,45,100,105,114,101,99,116,104,97,99,107,32,114,98,45,102,108,111,97,116,105,110,103,32,116,114,103,45,98,45,98,97,110,110,101,114,45,98,108,111,99,107)),n.setAttribute("style","position: absolute !important; top: -9999px !important; left: -9999px !important; width: 1px !important; height: 1px !important;"),n.setAttribute("id","trg-b-banners-1"),n.setAttribute("data-view","SlotView.mimic"),this.bait=q.body.appendChild(n),this.bait.offsetParent,this.bait.offsetHeight,this.bait.offsetLeft,this.bait.offsetTop,this.bait.offsetWidth,this.bait.clientHeight,this.bait.clientWidth,this.loopNumber=0,this.fnPositive=e||null,this.fnNegative=t||null;var r=this;setTimeout((function(){r._checkBait.call(r)}),1)}return e.prototype._checkBait=function(){if(se)this._stop();else{var e=!1;if(null!==q.body.getAttribute("abp")||null===this.bait.offsetParent||0==this.bait.offsetHeight||0==this.bait.offsetLeft||0==this.bait.offsetTop||0==this.bait.offsetWidth||0==this.bait.clientHeight||0==this.bait.clientWidth?e=!0:void 0!==H.getComputedStyle&&(e="none"==(e=H.getComputedStyle(this.bait,null)).getPropertyValue("display")||"hidden"==e.getPropertyValue("visibility")),(!0===e||10<=++this.loopNumber)&&this._stop(),e&&this.fnPositive)try{(0,this.fnPositive)()}catch(e){K&&console.warn("[TopMailRu] Error#1.9",e)}else if(!e&&10>this.loopNumber){var t=this;setTimeout((function(){t._checkBait.call(t)}),50*this.loopNumber)}else try{(0,this.fnNegative)()}catch(e){K&&console.warn("[TopMailRu] Error#1.10",e)}}},e.prototype._stop=function(){try{q.body.removeChild(this.bait)}catch(e){K&&console.warn("[TopMailRu] Error#1.11",e)}},function(t,n){new e(t,n)}}(),he=null,ve="ecommerce",me=!1,ge=[],ye=[36383,2540645,3171181,3074137,2057653],_e=[];!function(){function e(e,t){for(var n=0,r=t.length;n<r;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function t(t,n,r){for(var o={ecom_method:[],ecom_type:[],ecom_data:{events:[]}},i=0,a=t.length;i<a;i++){var l=h[t[i]];if(l){e(o.ecom_method,[t[i]]);for(var c=0,s=l.length;c<s;c++)for(var u=0,p=r.length;u<p;u++){var d=l[c][r[u]];if(d)for(var f=0,v=n.length;f<v;f++)if(-1!==l[c].type.indexOf(n[f])){e(o.ecom_type,[n[f]]),e(o.ecom_data.events,d);break}}}}return o}function n(e,t,n){if(!e||!n||!(t in h))return null;for(var r,o=0,i=h[t].length;o<i;o++)if(n in(r=h[t][o])&&-1!==r[n].indexOf(e))return{ecom_method:[t],ecom_type:r.type.slice(),ecom_data:{}};return null}function r(e){for(var r,u,p=[],h=0,v=e.length;h<v;h++)if(u=e[h]){r=null;try{if(u.ecommerce)r=o(u)||a(u);else if(null===u.ecommerce)r=null;else if(u.event){var m={event:u.event,ecommerce:{}};r=o(m)||a(m)}else if("event"===u[0]){var g=u[1],y=u[2],_=n(g,c,d);_&&(_.ecom_data[g]=y),r=_}else if(u.event===ve)e:{for(var b=t([l],[s],[f]),w=0,E=b.ecom_data.events.length;w<E;w++)if(!u.hasOwnProperty(b.ecom_data.events[w])){r=null;break e}delete b.ecom_data.events,b.ecom_data[ve]=u,r=b}}catch(e){K&&console.warn("[TopMailRu] Error#1.23",e),r=null}r&&(p.push(r),ge.push(r))}if(p.length){for(e=0,r=p.length;e<r;e++)R(Ne,p[e]);for(he||(he=[0,0]),he[0]+=p.length,r=e=0,h=p.length;r<h;r++)e+=i(p[r].ecom_data,!1,!0).length;he[1]+=e}}function o(e){var t,r;for(r in e.ecommerce)if(e.ecommerce.hasOwnProperty(r)&&(t=n(r,l,u))){if(e.event&&(r=n(e.event,l,p)))for(var o=0,i=t.ecom_type.length;o<i;o++)-1===r.ecom_type.indexOf(t.ecom_type[o])&&(t.ecom_type.splice(o,1),i--,o--);return t.ecom_data=e.ecommerce,t}return null}function a(e){var t=e.event,r=n(t,l,p);return r&&(r.ecom_data[t]=e.ecommerce),r}var l="push",c="gtag",s="gse",u="inner",p="outer",d="external",f="required",h={};h[c]=[{type:["gee"],external:"add checkout checkout_option checkout_progress click detail promo_click remove select_content set_checkout_option view_refund".split(" ")},{type:["ga4"],external:"earn_virtual_currency join_group level_end level_start level_up post_score select_content spend_virtual_currency tutorial_begin tutorial_complete unlock_achievement ad_impression login search share sign_up add_payment_info add_shipping_info add_to_wishlist generate_lead select_item select_promotion view_cart view_item_list".split(" ")},{type:["gee","ga4"],external:"add_to_cart begin_checkout purchase refund remove_from_cart view_item view_promotion".split(" ")}],h[l]=[{type:[s],required:["transactionId","transactionTotal"]},{type:["ga4"],outer:t([c],["ga4"],[d]).ecom_data.events},{type:["gee"],inner:"click checkout checkout_option impressions promoClick promoView refund".split(" "),outer:"addToCart checkout checkoutOption productClick productDetail ProductImpressions promotionClick promotionView removeFromCart transactionPush".split(" ")},{type:["ym","gee"],inner:["add","detail","purchase","remove"]}],ce=function(){!function(e){if((e=H[e])&&"function"==typeof e.push){r(e);var t=e.push;e.push=function(){var e=t.apply(this,arguments);return r([].slice.call(arguments,0)),e}}}("dataLayer"),me=!0}}();var be=(st=[{id:"gtag",globalVars:["google_tag_manager"]},{id:"ga",globalVars:["GoogleAnalyticsObject"]},{id:"ym",globalVars:["Ya",{re:"yaCounter\\d+"}]}],function(){var e;try{e=Object.keys(window).join(",")}catch(t){e=null}for(var t=[],n=0,r=st.length;n<r;n++){var o;e:{for(var i=e,a=0,l=(o=st[n].globalVars).length;a<l;a++){var c=o[a];if("string"==typeof c&&!(c in window)||"string"==typeof c.re&&(i&&-1===i.search(RegExp("($|,)"+c.re+"(,|^)","m"))||1===l)){o=!1;break e}}o=!0}o&&t.push(st[n].id)}return t}),we=be(),Ee=864e5,ke="tmr_floc",Te=null;!function(e){try{document.interestCohort&&"function"==typeof document.interestCohort&&document.interestCohort().then((function(e){Te={id:e.id,version:e.version},e=[e.id,e.version];var t=s();e=e.concat(t).join("|"),w(ke,e,{path:"/",expires:Ee})}),(function(){}))}catch(e){}}();var Re={support:!1};(Re=function(){function e(){o(a)}function t(){o(a,d)}function r(){return l?!q[l]:null}function o(e,t){var n=s(),o=void 0===t?r():t;if(null===f[e])f[e]={ts:n,state:o,total:0};else{var a=f[e];if(a.state!==o){var l=n-a.ts,c=a.state;a.ts=n,a.state=o,l<i||(c===u?(a.total+=l,h&&h(n,l)):c===p&&v&&v(n,l))}}}var i=5,a="auto",l=null,c=null,u=!0,p=!1,d=null;"hidden"in q?(l="hidden",c="visibilitychange"):"mozHidden"in q?(l="mozHidden",c="mozvisibilitychange"):"webkitHidden"in q?(l="webkitHidden",c="webkitvisibilitychange"):"msHidden"in q&&(l="msHidden",c="msvisibilitychange");var f={};f[a]=null;var h=f.user=null,v=null;return{support:!!l,auto:function(r,o){h=r||null,v=o||null,l&&(e(),n(q,c,e)),n(H,"beforeunload",t),n(H,"unload",t)},set:function(e){o("user",!!e)},getLog:function(){var e,t,n=s(),r={};for(t in f)e=f[t],r[t]=e?e.total:0,e&&e.state&&(r[t]+=n-e.ts);return r},getValue:r}}()).auto();var Se="60.3.0",Me=0,Ce=0,Ie=c(16),je=null,xe=null,Pe=0,Ue="tmr_reqNum",Le=null===(Le=k(Ue))?0:parseInt(Le,10);E(Ue,Le);var Oe=k("tmr_lvid"),Ve=k("tmr_lvidTS");null!==Oe&&-1!==Oe.search(/^[0-9a-fA-F]+$/)||(Oe=c(32)),E("tmr_lvid",Oe),null!==Ve&&-1!==Ve.search(/^\d+$/)||(Ve=""+s()),E("tmr_lvidTS",Ve);var Ae,De,He=0,$e=[],qe=[],Ge=[],Ne=[],We="ontouchstart"in H||1<($.maxTouchPoints||$.msMaxTouchPoints)?"1":"0",ze=H.devicePixelRatio||0,Fe=H.top===H?0:1,Be=null,Xe=H.performance||H.mozPerformance||H.msPerformance||H.webkitPerformance||{},Ke=Xe.timing||{},Ye=Xe.navigation||{},Ze="unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),Je=Ke?Ke.navigationStart:void 0,Qe="downlink downlinkMax effectiveType rtt saveData type".split(" ");Ae=function(e,t,n){if(t&&"object"==typeof t){var r,o="id"in t&&t.id||He,i=n.title||null,a=De(t,{params:n.required,fn:n.fn});if(a.missed.length)console.warn("[TopMailRu]"+(o?"["+o+"]":"")+" Error#1.14","Unspecified "+(1<a.missed.length&&a.missed.slice(0,-1).join(", ")+" and "||"")+a.missed.slice(-1)+" in "+e);else{var l=De(t,{params:n.optional,fn:n.fn});r=[].concat(a.values).concat(l.values),a=[].concat(a.missed).concat(l.missed),n.value&&(t="value"in t&&t.value,!0!==n.value&&(t=t||n.value),t?r.push("value: "+t):a.push("value")),n=r.length?"{ "+r.join(", ")+" }":"",r=a.length?"("+(1<a.length?a.slice(0,-1).join(", ")+" and "+a.slice(-1)+" are":a.slice(-1)+" is")+" empty)":"",o?console.info("[TopMailRu]["+o+"]: "+(i||e)+" "+n+" "+r):console.warn("[TopMailRu] Error#1.15","Undefined counter ID of "+e+" "+n)}}else console.warn("[TopMailRu][]["+e+"] Error#1.13")},De=function(e,t){var n,r,o,i=[],a=[];if(t.params)for(n in t.params)if(t.params.hasOwnProperty(n)&&!1!==t.params[n])if(r=n in e&&e[n],!0!==t.params[n]&&(r=r||t.params[n]),r)try{o=t.fn?t.fn:null,i.push(n+': "'+(o?o(n,r):r)+'"')}catch(e){console.warn("[TopMailRu] Error#1.16",e)}else a&&a.push(n);return{values:i,missed:a}},M.prototype.callbackOnReady=function(e){K&&Ae("onReady",e,{title:"OnReady callback"}),e&&"object"==typeof e&&"function"==typeof e.callback&&e.callback.call(e.context||null)},M.prototype.pageView=function(e){if(C(e),e&&"object"==typeof e&&e.id&&(5>qe.length&&!o(e.id,qe)&&(qe.push(e.id),!1!==e.beat&&Ge.push(e.id),$e.push(e),se&&T(e)),5>Ne.length&&!o(e.id,Ne)&&(!0===e.ecom||!1!==e.ecom&&(o(e.id,ye)||!o(e.id,_e))))){Ne.push(e.id);var t=[e.id];if(me)for(var n=0,r=ge.length;n<r;n++)R(t,ge[n])}K&&Ae("pageView",e,{title:"Page view",optional:{url:G.href}}),x(e)&&(u(P(e,"/counter",!1,!0)),Ce=s())},M.prototype.reachGoal=function(e){if(C(e),K&&Ae("reachGoal",e,{title:"Reach goal",value:!0,required:{goal:!0}}),x(e)&&"goal"in e&&e.goal){var t="";"value"in e&&e.value&&(t=parseInt(e.value)||""),u(P(e,"/tracker",!1,!0)+";e="+escape("RG:"+t+"/"+e.goal))}},M.prototype.itemView=function(e){if(K&&Ae("itemView",e,{title:"Item view",optional:{list:!0,pagetype:!0,productid:!0,totalvalue:!0},fn:function(e,t){return(""+t).replace(/;/g," ")}}),x(e)){var t=e.list||"",n=e.productid||"",r=e.pagetype||"",o=e.totalvalue||0;(new Image).src="https://ad.mail.ru/retarget/?counter="+(e.id||He)+"&list="+t+"&productid="+n+"&pagetype="+r+"&totalvalue="+o+"&_="+Math.random(),t="IV:"+o+"/"+(""+t).replace(/;/g," ")+";"+(""+n).replace(/;/g," ")+";"+(""+r).replace(/;/g," "),u(P(e,"/tracker",!1,!1)+";e="+escape(t))}},M.prototype.sendEvent=function(e){if(C(e),K&&Ae("sendEvent",e,{title:"Send event",value:!0,required:{category:!0,action:!0},optional:{label:!0},fn:function(e,t){return(""+t).substring(0,300).replace(/;/g," ")}}),x(e)&&"category"in e&&e.category&&"action"in e&&e.action){var t=(""+e.category).substring(0,300),n=(""+e.action).substring(0,300),r="";"label"in e&&e.label&&(r=(""+e.label).substring(0,300));var o="";"value"in e&&e.value&&(o=parseInt(e.value)||""),t="CE:"+o+"/"+(""+t).replace(/;/g," ")+";"+(""+n).replace(/;/g," ")+";"+(""+r).replace(/;/g," "),u(P(e,"/tracker",!1,!1)+";e="+escape(t))}},M.prototype.setUserID=function(e){if(null===e||!1===e||void 0===e)this.deleteUserID();else{var t=typeof e;"number"!==t&&"string"!==t?K&&console.warn("[TopMailRu] Error#1.17","Invalid user ID in setUserID"):(je=e,K&&console.info("[TopMailRu]: Global user ID = "+je))}},M.prototype.getUserID=function(){return je||0===je?je:void 0},M.prototype.deleteUserID=function(){je=null,K&&console.info("[TopMailRu]: Reset global user ID to null")},M.prototype.setUserParams=function(t){if(null===t||!1===t||void 0===t)this.deleteUserParams();else if(e(t)){try{xe=l(!0,{},t)}catch(e){return void(K&&console.warn("[TopMailRu] Error#1.22","Invalid user params in setUserParams"))}K&&console.info("[TopMailRu]: Global user params = "+i(xe,!1,!1))}else K&&console.warn("[TopMailRu] Error#1.21","Invalid user params in setUserParams")},M.prototype.getUserParams=function(){var e=xe||void 0;return e?l(!0,{},e):void 0},M.prototype.deleteUserParams=function(){xe=null,K&&console.info("[TopMailRu]: Reset global user params to null")},M.prototype.getClientID=function(){return Oe||0===Oe?Oe:void 0},M.prototype._MT_event=function(e,t,n){C(e),K&&Ae(t,e,{title:n}),x(e)&&u(P(e,"/tracker",!1,!0)+";e="+escape("MT:/"+t))},M.prototype.miniAppEvent=function(e){this._MT_event(e,"miniAppEvent","VK Mini App Event")},M.prototype.processEvent=function(e,t){if(e&&"object"==typeof e)if("type"in e){if("onready"===e.type){if(t&&0>t)return;this.callbackOnReady(e)}else if(t&&0<t)return;switch(e.type){case"pageView":this.pageView(e);break;case"reachGoal":this.reachGoal(e);break;case"itemView":this.itemView(e);break;case"sendEvent":this.sendEvent(e);break;case"setUserID":"userid"in e&&this.setUserID(e.userid);break;case"deleteUserID":this.deleteUserID();break;case"setUserParams":"params"in e&&this.setUserParams(e.params);break;case"deleteUserParams":this.deleteUserParams();break;case"miniAppEvent":this.miniAppEvent(e)}}else K&&console.warn("[TopMailRu] Error#1.19","Unspecified type of push event");else K&&console.warn("[TopMailRu] Error#1.18","Invalid push event")},M.prototype.push=function(e){for(var t=0,n=arguments.length;t<n;t++)this.processEvent(arguments[t])};var et=!1;M.prototype.onready=function(){et||(et=!0,!te&&!se&&fe(L,O),ce())};var tt=!1;M.prototype.onload=function(){if(!tt){if(tt=!0,Pe=s(),!Q&&0<$e.length){for(var e=";e="+escape("RT/load")+";et="+Pe,t=0;t<$e.length;t++)u(P($e[t],"/tracker",!0,!1)+e);Ce=Pe}Z||setTimeout((function(){U(2)}),2e3),J||setTimeout((function(){U(15)}),15e3)}},M.prototype.beat=function(){if(!Y&&Me){var e=s();if(!(12e4<e-Me)){if(12e4<e-Ce)for(var t=";e="+escape("RT/resend")+";et="+Pe,n=0;n<$e.length;n++)!1!==$e[n].beat&&u(P($e[n],"/tracker",!1,!0)+t);else 0<Ge.length&&u("/tracker?"+_({js:"13",id:Ge[0],e:"RT/beat",sid:Ie,ids:Ge.join(),ver:Se,_:Math.random()},";"));Ce=e}}};var nt=!1;M.prototype.unload=function(){if(!nt&&(nt=!0,!ee)){var e;if(e=(e=j())?s()-e:void 0,e=";e="+escape("RT/unload")+";et="+s()+(e?";pvt="+escape(e):""),Re.support){var t=Re.getLog();e+=";vtauto="+t.auto}for(t=0;t<$e.length;t++)u(P($e[t],"/tracker",!1,!1)+e)}},M.prototype.activity=function(e){Me=s()};var rt=_tmr;_tmr=new M;for(var ot,it=0,at=rt.length;it<at;it++)(ot=rt[it])&&"object"==typeof ot&&C(ot);for(it=0,at=rt.length;it<at;it++)ot=rt[it],_tmr.processEvent(ot,1);for(it=0,at=rt.length;it<at;it++)ot=rt[it],_tmr.processEvent(ot,-1);if("complete"===q.readyState||"loading"!==q.readyState&&!q.documentElement.doScroll?_tmr.onready():q.addEventListener?n(q,"DOMContentLoaded",A):q.attachEvent&&n(q,"readystatechange",A),"complete"===q.readyState?_tmr.onload():n(H,"load",(function e(){r(H,"load",e),_tmr.onready(),_tmr.onload()})),ee||(n(H,"unload",D),n(H,"beforeunload",D)),!Y){setInterval((function(){_tmr.beat()}),6e4);try{var lt="scroll gesturechange touchmove mousedown mousemove mouseup touch".split(" "),ct=function(e){n(q,e,(function(){_tmr.activity(e)}))};for(it=0;it<lt.length;it++)ct(lt[it]);n(H,"scroll",(function(){_tmr.activity("scallback")}))}catch(e){K&&console.warn("[TopMailRu] Error#1.20",e)}}}var st}();